

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/dog.png">
  <link rel="icon" href="/img/dog.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#325686">
  <meta name="author" content="ztrura">
  <meta name="keywords" content="">
  
    <meta name="description" content="计算机网络抓包实验7-1。">
<meta property="og:type" content="article">
<meta property="og:title" content="lab7-1 Wireshark_DNS">
<meta property="og:url" content="http://ztrura.com/2022/12/29/CNLab7-1/index.html">
<meta property="og:site_name" content="Ztrura">
<meta property="og:description" content="计算机网络抓包实验7-1。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://ztrura.com/2022/12/29/CNLab7-1/image-20221203000122497.png">
<meta property="og:image" content="http://ztrura.com/2022/12/29/CNLab7-1/image-20221203000137389.png">
<meta property="og:image" content="http://ztrura.com/2022/12/29/CNLab7-1/image-20221203000222701.png">
<meta property="og:image" content="http://ztrura.com/2022/12/29/CNLab7-1/image-20221203000744223.png">
<meta property="og:image" content="http://ztrura.com/2022/12/29/CNLab7-1/image-20221203051444665.png">
<meta property="og:image" content="http://ztrura.com/2022/12/29/CNLab7-1/image-20221203051742327.png">
<meta property="og:image" content="http://ztrura.com/2022/12/29/CNLab7-1/image-20221203052522889.png">
<meta property="og:image" content="http://ztrura.com/2022/12/29/CNLab7-1/image-20221203052837255.png">
<meta property="og:image" content="http://ztrura.com/2022/12/29/CNLab7-1/image-20221203053019621.png">
<meta property="og:image" content="http://ztrura.com/2022/12/29/CNLab7-1/image-20221203054524747.png">
<meta property="og:image" content="http://ztrura.com/2022/12/29/CNLab7-1/image-20221203055016658.png">
<meta property="og:image" content="http://ztrura.com/2022/12/29/CNLab7-1/image-20221203055905381.png">
<meta property="og:image" content="http://ztrura.com/2022/12/29/CNLab7-1/image-20221203055928083.png">
<meta property="og:image" content="http://ztrura.com/2022/12/29/CNLab7-1/image-20221203055349865.png">
<meta property="og:image" content="http://ztrura.com/2022/12/29/CNLab7-1/image-20221203055330579.png">
<meta property="og:image" content="http://ztrura.com/2022/12/29/CNLab7-1/image-20221203060313173.png">
<meta property="og:image" content="http://ztrura.com/2022/12/29/CNLab7-1/image-20221203060550658.png">
<meta property="og:image" content="http://ztrura.com/2022/12/29/CNLab7-1/image-20221203061017800.png">
<meta property="og:image" content="http://ztrura.com/2022/12/29/CNLab7-1/image-20221203062325456.png">
<meta property="og:image" content="http://ztrura.com/2022/12/29/CNLab7-1/image-20221203062555017.png">
<meta property="og:image" content="http://ztrura.com/2022/12/29/CNLab7-1/image-20221203062736314.png">
<meta property="og:image" content="http://ztrura.com/2022/12/29/CNLab7-1/image-20221203062834172.png">
<meta property="og:image" content="http://ztrura.com/2022/12/29/CNLab7-1/image-20221203062950094.png">
<meta property="og:image" content="http://ztrura.com/2022/12/29/CNLab7-1/image-20221203063129764.png">
<meta property="og:image" content="http://ztrura.com/2022/12/29/CNLab7-1/image-20221203063254661.png">
<meta property="og:image" content="http://ztrura.com/2022/12/29/CNLab7-1/image-20221203064325190.png">
<meta property="og:image" content="http://ztrura.com/2022/12/29/CNLab7-1/image-20221203064401955.png">
<meta property="og:image" content="http://ztrura.com/2022/12/29/CNLab7-1/image-20221203064459497.png">
<meta property="og:image" content="http://ztrura.com/2022/12/29/CNLab7-1/image-20221203064921225.png">
<meta property="og:image" content="http://ztrura.com/2022/12/29/CNLab7-1/image-20221203065543303.png">
<meta property="og:image" content="http://ztrura.com/2022/12/29/CNLab7-1/image-20221203065758030.png">
<meta property="og:image" content="http://ztrura.com/2022/12/29/CNLab7-1/image-20221203070205462.png">
<meta property="og:image" content="http://ztrura.com/2022/12/29/CNLab7-1/image-20221203070256432.png">
<meta property="og:image" content="http://ztrura.com/2022/12/29/CNLab7-1/image-20221203070404563.png">
<meta property="article:published_time" content="2022-12-29T10:47:30.000Z">
<meta property="article:modified_time" content="2023-10-11T14:37:56.452Z">
<meta property="article:author" content="Ztrura">
<meta property="article:tag" content="Wireshark">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://ztrura.com/2022/12/29/CNLab7-1/image-20221203000122497.png">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>lab7-1 Wireshark_DNS - Ztrura</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"ztrura.com","root":"/","version":"1.9.4","typing":{"enable":true,"typeSpeed":100,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 60vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Ztrura</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/yourname.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="lab7-1 Wireshark_DNS"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2022-12-29 18:47" pubdate>
          2022年12月29日 晚上
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          4.2k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          21 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar category-bar" style="margin-right: -1rem">
    





<div class="category-list">
  
  
    
    
    
    <div class="category row nomargin-x">
      <a class="category-item 
          list-group-item category-item-action col-10 col-md-11 col-xm-11" title="学业"
        id="heading-a44ee9d422efe6c3240a19c9565dc303" role="tab" data-toggle="collapse" href="#collapse-a44ee9d422efe6c3240a19c9565dc303"
        aria-expanded="true"
      >
        学业
        <span class="list-group-count">(13)</span>
        <i class="iconfont icon-arrowright"></i>
      </a>
      
      <div class="category-collapse collapse show" id="collapse-a44ee9d422efe6c3240a19c9565dc303"
           role="tabpanel" aria-labelledby="heading-a44ee9d422efe6c3240a19c9565dc303">
        
        
          
          
  <div class="category-post-list">
    
    
  </div>

          
  
    
    
    
    <div class="category-sub row nomargin-x">
      <a class="category-subitem collapsed
          list-group-item category-item-action col-10 col-md-11 col-xm-11" title="IDEAS Lab"
        id="heading-b3932145777176913f75b3a433020362" role="tab" data-toggle="collapse" href="#collapse-b3932145777176913f75b3a433020362"
        aria-expanded="false"
      >
        IDEAS Lab
        <span class="list-group-count">(3)</span>
        <i class="iconfont icon-arrowright"></i>
      </a>
      
      <div class="category-collapse collapse " id="collapse-b3932145777176913f75b3a433020362"
           role="tabpanel" aria-labelledby="heading-b3932145777176913f75b3a433020362">
        
        
          
  <div class="category-post-list">
    
    
      
      
        <a href="/2023/01/20/codeLMs/" title="Code LMs"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Code LMs</span>
        </a>
      
    
      
      
        <a href="/2023/01/10/LanguageModels/" title="Language Models"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Language Models</span>
        </a>
      
    
      
      
        <a href="/2023/01/13/LanguageModels2/" title="Language Models 补充"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Language Models 补充</span>
        </a>
      
    
  </div>

        
      </div>
    </div>
  
    
    
    
    <div class="category-sub row nomargin-x">
      <a class="category-subitem 
          list-group-item category-item-action col-10 col-md-11 col-xm-11" title="计算机网络实验"
        id="heading-677bc9451ef3a201841fd067aad087e8" role="tab" data-toggle="collapse" href="#collapse-677bc9451ef3a201841fd067aad087e8"
        aria-expanded="true"
      >
        计算机网络实验
        <span class="list-group-count">(10)</span>
        <i class="iconfont icon-arrowright"></i>
      </a>
      
      <div class="category-collapse collapse show" id="collapse-677bc9451ef3a201841fd067aad087e8"
           role="tabpanel" aria-labelledby="heading-677bc9451ef3a201841fd067aad087e8">
        
        
          
  <div class="category-post-list">
    
    
      
      
        <a href="/2022/12/29/CNLab1-1/" title="lab1-1 Wireshark_Intro_v7.0"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">lab1-1 Wireshark_Intro_v7.0</span>
        </a>
      
    
      
      
        <a href="/2022/12/29/CNLab1-2/" title="lab1-2 Wireshark-protocal layers"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">lab1-2 Wireshark-protocal layers</span>
        </a>
      
    
      
      
        <a href="/2022/12/29/CNLab4-1/" title="lab4-1 Wireshark-ethernet"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">lab4-1 Wireshark-ethernet</span>
        </a>
      
    
      
      
        <a href="/2022/12/29/CNLab4-2/" title="lab4-2 Wireshark-80211"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">lab4-2 Wireshark-80211</span>
        </a>
      
    
      
      
        <a href="/2022/12/29/CNLab5-1/" title="lab5-1 Wireshark-ipv4"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">lab5-1 Wireshark-ipv4</span>
        </a>
      
    
      
      
        <a href="/2022/12/29/CNLab5-2/" title="lab5-2 Wireshark_ICMP"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">lab5-2 Wireshark_ICMP</span>
        </a>
      
    
      
      
        <a href="/2022/12/29/CNLab6-1/" title="lab6-1 Wireshark-TCP"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">lab6-1 Wireshark-TCP</span>
        </a>
      
    
      
      
        <a href="/2022/12/29/CNLab6-2/" title="lab6-2 Wireshark-UDP"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">lab6-2 Wireshark-UDP</span>
        </a>
      
    
      
      
        <a href="/2022/12/29/CNLab7-1/" title="lab7-1 Wireshark_DNS"
           class="list-group-item list-group-item-action
           active">
          <span class="category-post">lab7-1 Wireshark_DNS</span>
        </a>
      
    
      
      
        <a href="/2022/12/29/CNLab7-2/" title="lab7-2 Wireshark-HTTP"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">lab7-2 Wireshark-HTTP</span>
        </a>
      
    
  </div>

        
      </div>
    </div>
  
        
      </div>
    </div>
  
</div>


  </aside>


    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">lab7-1 Wireshark_DNS</h1>
            
            
              <div class="markdown-body">
                
                <h2 id="Lab7-1-DNS"><a href="#Lab7-1-DNS" class="headerlink" title="Lab7-1 DNS"></a>Lab7-1 DNS</h2><h4 id="1-Introduction"><a href="#1-Introduction" class="headerlink" title="1 Introduction"></a>1 Introduction</h4><p>域名系统(DNS)将主机名转换为IP地址，在互联网基础设施中发挥着关键作用。</p>
<h4 id="2-Steps"><a href="#2-Steps" class="headerlink" title="2 Steps"></a>2 Steps</h4><h5 id="Step-1-nslookup"><a href="#Step-1-nslookup" class="headerlink" title="Step 1: nslookup"></a>Step 1: nslookup</h5><p>简单介绍几种常用的nslookup命令：</p>
<ul>
<li><p>“nslookup www.mit.edu”，意为“请给我发送主机www.mit.edu的IP地址”。</p>
<p><img src="image-20221203000122497.png" srcset="/img/loading.gif" lazyload alt="image-20221203000122497"></p>
</li>
<li><p>“nslookup –type=NS mit.edu”，意为”请把mit.edu的权威DNS的主机名发给我“，当不使用-type选项时，nslookup使用默认值，即查询A类型的记录。</p>
<p><img src="image-20221203000137389.png" srcset="/img/loading.gif" lazyload alt="image-20221203000137389"></p>
</li>
<li><p>“nslookup www.aiit.or.kr bitsy.mit.edu”，使用这个命令，我们将会将查询发送到DNS服务器bitsy.mit.edu，而不是缺省DNS服务器(DNS -prime.poly.edu)，即查询和回复直接发生在我们的查询主机和bitsy.mit.edu之间。</p>
<p>这里一直显示超时，估计是地域原因（主机www.aiit.or.kr是韩国高级信息技术学院的web服务器）。</p>
<p><img src="image-20221203000222701.png" srcset="/img/loading.gif" lazyload alt="image-20221203000222701"></p>
</li>
<li><p>“nslookup –option1 –option2 host-to-find dns-server”是nslookup的一般语法，我们可以看到，nslookup可以在0个、1个、2个或多个选项的情况下运行（dns-server也是可选的）。</p>
</li>
</ul>
<p><em>1. Run nslookup to obtain the IP address of a Web server in Asia. What is the IP address of that server?</em> </p>
<p><em>如图，获取到”www.sdu.edu.cn”的IP地址为202.194.7.118（2001:da8:7000:7:202:194:7:118为IPv6地址）。</em></p>
<p><img src="image-20221203000744223.png" srcset="/img/loading.gif" lazyload alt="image-20221203000744223"></p>
<p><em>2. Run nslookup to determine the authoritative DNS servers for a university in Europe.</em> </p>
<p><em>这里选择了剑桥大学。</em></p>
<p><img src="image-20221203051444665.png" srcset="/img/loading.gif" lazyload alt="image-20221203051444665"></p>
<p><em>3. Run nslookup so that one of the DNS servers obtained in Question 2 is queried for the mail servers for Yahoo! mail. What is its IP address?</em></p>
<p><em>如下图，这里试了很多个问题2中的DNS服务器都显示找不到，最后就查了剑桥大学来代替了。得到的IP地址为128.232.132.8。</em></p>
<p><img src="image-20221203051742327.png" srcset="/img/loading.gif" lazyload alt="image-20221203051742327"></p>
<h5 id="Step-2-ipconfig"><a href="#Step-2-ipconfig" class="headerlink" title="Step 2: ipconfig"></a>Step 2: ipconfig</h5><p>ipconfig可以用来显示当前的TCP/IP信息，包括本机的地址、DNS服务器地址、适配器类型等，我们使用”ipconfig /all”命令来获得以上提到的所有信息。</p>
<p><img src="image-20221203052522889.png" srcset="/img/loading.gif" lazyload alt="image-20221203052522889"></p>
<p>ipconfig对于管理存储在主机中的DNS信息也非常有用，比如我们可以使用”ipconfig /displaydns”命令来查看主机缓存的最近获得的DNS记录。</p>
<p><img src="image-20221203052837255.png" srcset="/img/loading.gif" lazyload alt="image-20221203052837255"></p>
<p>我们也可以通过输入”ipconfig /flushdns”命令来清除缓存。</p>
<p><img src="image-20221203053019621.png" srcset="/img/loading.gif" lazyload alt="image-20221203053019621"></p>
<p>Step 3: Tracing DNS with Wireshark</p>
<p>现在我们将通过Wireshark来追踪DNS。首先，使用”ipconfig /flushdns”命令来清楚DNS缓存。然后在Wireshark中使用”ip.addr == 192.168.254.245”（这里的192.168.56.1是本机IP地址）过滤器（这个过滤器将删除既不从本地主机发出也不发往本地主机的所有数据包）来开始抓包。最后，使用浏览器浏览一个网页，如这里实验手册提供的”<a target="_blank" rel="noopener" href="http://www.ietf.org&quot;。抓包结果如下图。">http://www.ietf.org&quot;。抓包结果如下图。</a></p>
<p><img src="image-20221203054524747.png" srcset="/img/loading.gif" lazyload alt="image-20221203054524747"></p>
<p><em>4. Locate the DNS query and response messages. Are then sent over UDP or TCP?</em>  </p>
<p><em>如下图，通过UDP发送。</em></p>
<p><img src="image-20221203055016658.png" srcset="/img/loading.gif" lazyload alt="image-20221203055016658"></p>
<p><em>5. What is the destination port for the DNS query message? What is the source port  of DNS response message?</em> </p>
<p><em>由下面两图可知，DNS查询消息的目的端口和DNS响应消息的源端口都为53。</em></p>
<p><img src="image-20221203055905381.png" srcset="/img/loading.gif" lazyload alt="image-20221203055905381"></p>
<p><img src="image-20221203055928083.png" srcset="/img/loading.gif" lazyload alt="image-20221203055928083"></p>
<p><em>6. To what IP address is the DNS query message sent? Use ipconfig to determine the IP address of your local DNS server. Are these two IP addresses the same?</em>  </p>
<p><em>DNS查询消息发送到的IP地址为192.168.254.245，使用 ipconfig 确定的本地 DNS 服务器的 IP 地址也为192.168.254.245。对比可以发现，二者相同。</em></p>
<p><img src="image-20221203055349865.png" srcset="/img/loading.gif" lazyload alt="image-20221203055349865"></p>
<p><img src="image-20221203055330579.png" srcset="/img/loading.gif" lazyload alt="image-20221203055330579"></p>
<p><em>7. Examine the DNS query message. What “Type” of DNS query is it? Does the  query message contain any “answers”?</em> </p>
<p><em>如下图，为A类型（也有AAAA类型），没有答案。</em></p>
<p><img src="image-20221203060313173.png" srcset="/img/loading.gif" lazyload alt="image-20221203060313173"></p>
<p><em>8. Examine the DNS response message. How many “answers” are provided? What  do each of these answers contain?</em></p>
<p><em>下面这个例子中，答案数为1，其内容如图。</em></p>
<p><img src="image-20221203060550658.png" srcset="/img/loading.gif" lazyload alt="image-20221203060550658"></p>
<p><em>9. Consider the subsequent TCP SYN packet sent by your host. Does the destination IP address of the SYN packet correspond to any of the IP addresses provided in the DNS response message?</em> </p>
<p><em>如下图可知，二者相对应。</em></p>
<p><img src="image-20221203061017800.png" srcset="/img/loading.gif" lazyload alt="image-20221203061017800"></p>
<p><em>10. This web page contains images. Before retrieving each image, does your host issue new DNS queries?</em> </p>
<p><em>发起了新的查询，原因可能是图片存放的服务器的域名和之前查询的不一致。</em></p>
<p>现在我们来练习使用nslookup。首先，先在命令行运行”ipconfig /flushdns”以清除缓存。在打开Wireshark开始抓包后，在命令行中输入”nslookup on www.mit.edu”。</p>
<p><img src="image-20221203062325456.png" srcset="/img/loading.gif" lazyload alt="image-20221203062325456"></p>
<p>运行完成后停止抓包，得到结果如下图。</p>
<p><img src="image-20221203062555017.png" srcset="/img/loading.gif" lazyload alt="image-20221203062555017"></p>
<p><em>11. What is the destination port for the DNS query message? What is the source port  of DNS response message?</em> </p>
<p><em>由下面两图可知，与之前一样，DNS查询消息的目的端口和DNS响应消息的源端口都为53。</em></p>
<p><img src="image-20221203062736314.png" srcset="/img/loading.gif" lazyload alt="image-20221203062736314"></p>
<p><img src="image-20221203062834172.png" srcset="/img/loading.gif" lazyload alt="image-20221203062834172"></p>
<p><em>12. To what IP address is the DNS query message sent? Is this the IP address of your default local DNS server?</em> </p>
<p><em>由下图可知，DNS 查询消息发送到的IP地址为192.168.254.245，这与我们之前得到的本地DNS服务器的IP地址相同。</em></p>
<p><img src="image-20221203062950094.png" srcset="/img/loading.gif" lazyload alt="image-20221203062950094"></p>
<p><em>13. Examine the DNS query message. What “Type” of DNS query is it? Does the  query message contain any “answers”?</em> </p>
<p><em>如下图，为A类型（也有AAAA类型），没有答案。</em></p>
<p><img src="image-20221203063129764.png" srcset="/img/loading.gif" lazyload alt="image-20221203063129764"></p>
<p><em>14. Examine the DNS response message. How many “answers” are provided? What do each of these answers contain?</em> </p>
<p><em>如下图，答案数为3，内容如图。</em></p>
<p><img src="image-20221203063254661.png" srcset="/img/loading.gif" lazyload alt="image-20221203063254661"></p>
<p><em>15. Provide a screenshot.</em></p>
<p><em>上面每个问题的回答都带有截图。</em></p>
<p>现在重复刚刚的实验，不过把命令换为”nslookup –type=NS mit.edu”。抓包结果如下。</p>
<p><img src="image-20221203064325190.png" srcset="/img/loading.gif" lazyload alt="image-20221203064325190"></p>
<p><em>16. To what IP address is the DNS query message sent? Is this the IP address of your default local DNS server?</em> </p>
<p><em>由下图可知，DNS 查询消息发送到的IP地址为192.168.254.245，这与我们之前得到的本地DNS服务器的IP地址相同。</em></p>
<p><img src="image-20221203064401955.png" srcset="/img/loading.gif" lazyload alt="image-20221203064401955"></p>
<p><em>17. Examine the DNS query message. What “Type” of DNS query is it? Does the  query message contain any “answers”?</em> </p>
<p><em>如下图，为NS类型，没有答案。</em></p>
<p><img src="image-20221203064459497.png" srcset="/img/loading.gif" lazyload alt="image-20221203064459497"></p>
<p><em>18. Examine the DNS response message. What MIT nameservers does the response message provide? Does this response message also provide the IP addresses of the MIT namesers?</em> </p>
<p><em>如图，提供了麻省理工学院的一系列nameserver。经比对可发现，响应消息里不包含麻省理工学院的IP地址。</em></p>
<p><img src="image-20221203064921225.png" srcset="/img/loading.gif" lazyload alt="image-20221203064921225"></p>
<p><em>19. Provide a screenshot.</em></p>
<p><em>上面每个问题的回答都带有截图。</em></p>
<p>再次重复刚刚的实验，不过把命令换为”nslookup www.google.com bitsy.mit.edu”（这里实验手册给出的命令为”nslookup www.aiit.or.kr bitsy.mit.edu”，但一直超时（如下图），试了下最后发现改成谷歌可以）。</p>
<p><img src="image-20221203065543303.png" srcset="/img/loading.gif" lazyload alt="image-20221203065543303"></p>
<p>抓包结果如下。</p>
<p><img src="image-20221203065758030.png" srcset="/img/loading.gif" lazyload alt="image-20221203065758030"></p>
<p><em>20. To what IP address is the DNS query message sent? Is this the IP address of your  default local DNS server? If not, what does the IP address correspond to?</em> </p>
<p><em>由下图可知，DNS 查询消息发送到的IP地址为18.0.72.3，这与我们之前得到的本地DNS服务器的IP地址不同，它对应的是bitsy.mit.edu。</em></p>
<p><img src="image-20221203070205462.png" srcset="/img/loading.gif" lazyload alt="image-20221203070205462"></p>
<p><em>21. Examine the DNS query message. What “Type” of DNS query is it? Does the  query message contain any “answers”?</em> </p>
<p><em>如下图，为A类型（也有AAAA类型），没有答案。</em></p>
<p><img src="image-20221203070256432.png" srcset="/img/loading.gif" lazyload alt="image-20221203070256432"></p>
<p><em>22. Examine the DNS response message. How many “answers” are provided? What  does each of these answers contain?</em> </p>
<p><em>如下图，答案数为1，内容如图。</em></p>
<p><img src="image-20221203070404563.png" srcset="/img/loading.gif" lazyload alt="image-20221203070404563"></p>
<p><em>23. Provide a screenshot.</em></p>
<p><em>上面每个问题的回答都带有截图。</em></p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E5%AD%A6%E4%B8%9A/" class="category-chain-item">学业</a>
  
  
    <span>></span>
    
  <a href="/categories/%E5%AD%A6%E4%B8%9A/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C/" class="category-chain-item">计算机网络实验</a>
  
  

  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/Wireshark/">#Wireshark</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>lab7-1 Wireshark_DNS</div>
      <div>http://ztrura.com/2022/12/29/CNLab7-1/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>ztrura</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2022年12月29日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2022/12/29/CNLab7-2/" title="lab7-2 Wireshark-HTTP">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">lab7-2 Wireshark-HTTP</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2022/12/29/CNLab6-2/" title="lab6-2 Wireshark-UDP">
                        <span class="hidden-mobile">lab6-2 Wireshark-UDP</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  


  
  









    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <!--<i class="iconfont icon-love"></i>--> <a>&</a> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> <div style="font-size: 0.85rem"> <span id="timeDate">载入天数...</span> <span id="times">载入时分秒...</span> <script src="/js/duration.js"></script> </div> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="busuanzi_container_site_pv" style="display: none">
        总访问量 
        <span id="busuanzi_value_site_pv"></span>
         次
      </span>
    
    
      <span id="busuanzi_container_site_uv" style="display: none">
        总访客数 
        <span id="busuanzi_value_site_uv"></span>
         人
      </span>
    
    
  
</div>

  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  
      <script>
        if (!window.MathJax) {
          window.MathJax = {
            tex    : {
              inlineMath: { '[+]': [['$', '$']] }
            },
            loader : {
              load: ['ui/lazy']
            },
            options: {
              renderActions: {
                insertedScript: [200, () => {
                  document.querySelectorAll('mjx-container').forEach(node => {
                    let target = node.parentNode;
                    if (target.nodeName.toLowerCase() === 'li') {
                      target.parentNode.classList.add('has-jax');
                    }
                  });
                }, '', false]
              }
            }
          };
        } else {
          MathJax.startup.document.state(0);
          MathJax.texReset();
          MathJax.typeset();
          MathJax.typesetPromise();
        }

        Fluid.events.registerRefreshCallback(function() {
          if ('MathJax' in window && MathJax.startup.document && typeof MathJax.startup.document.state === 'function') {
            MathJax.startup.document.state(0);
            MathJax.texReset();
            MathJax.typeset();
            MathJax.typesetPromise();
          }
        });
      </script>
    

  <script  src="https://lib.baomitu.com/mathjax/3.2.2/es5/tex-mml-chtml.js" ></script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
